<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="action_validate_delhivery" model="ir.actions.server">
            <field name="name">Create Delhivery Order</field>
            <field name="model_id" ref="sale.model_sale_order"/>
            <field name="binding_model_id" ref="sale.model_sale_order"/>
            <field name="binding_view_types">form,list</field>
            <field name="state">code</field>
            <field name="code">
                    for rec in records:
                        action = rec.make_delhivery_order()
            </field>
        </record>
    <record id="sale_order_delivery_type" model="ir.ui.view">
        <field name="name">sale.order.inherited</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
<!--             <xpath expr="//field[@name='authorized_transaction_ids']" position="after">-->
<!--                <button name="return_delivery" string="Return Shipment" type="object"/>-->
<!--             </xpath>-->
            <xpath expr="//field[@name='authorized_transaction_ids']" position="after">
                <button name="rto_order" string="RTO" type="object"/>
             </xpath>

            <field name="analytic_account_id" position="after">
            </field>
            <field name="payment_term_id" position="after">
                <field name="partner_mobile"/>
                                <field name="call_detail"/>
                                <field name="payment_type"/>
               <field name="tracking_number"/>
                <field name="is_rto_order"/>
               <field name="cod_collected"/>
               <field name="amount_refunded"/>

            </field>

        </field>
    </record>
    <record id="tracking_in_so" model="ir.ui.view">
        <field name="name">tracking.so</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_tree"/>
        <field name="arch" type="xml">

            <xpath expr="//field[@name='invoice_status']" position="after">
               <field name="cod_collected"/>
               <field name="call_detail"/>
               <field name="tracking_number"/>
            </xpath>
            <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="partner_mobile"/>
                  <field name="danger" invisible="1"/>
            </xpath>


             <xpath expr="//tree" position="attributes">
                    <attribute name="decoration-danger">danger == True</attribute>
            </xpath>

        </field>
    </record>
    <record id="view_sale_order_tree_view" model="ir.ui.view">
        <field name="name">so_view_tree</field>
        <field name="model">sale.order</field>
        <field name="arch" type="xml">
            <tree string="so_tree">
                <field name="name"/>
                <field name="partner_id"/>
                 <field name="partner_mobile"/>
                <field name="call_detail"/>
                <field name="tracking_number"/>
            </tree>
        </field>
    </record>


    <!-- Define the action for the menu item -->
    <record id="action_view_sale_orders" model="ir.actions.act_window">
        <field name="name">Sale Orders</field>
        <field name="res_model">sale.order</field>

        <field name="view_mode">tree,form</field>
        <field name="target">current</field>
        <field name="view_id" ref="view_sale_order_tree_view"/>
        <field name="domain">[('state','=','sale'),('website_id', '!=', False)]</field>
        <field name="help" type="html">
            <p class="oe_view_nocontent_create">Click to see Sale Orders</p>
        </field>
    </record>
     <menuitem id="menu_sale_order_tree_view"
              name="Kenz View"
              sequence="10"
              parent="website_sale.menu_orders"
              action="action_view_sale_orders"/>
</odoo>
